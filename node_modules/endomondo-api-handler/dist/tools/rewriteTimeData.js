'use strict';

var luxon = require('luxon');

var rewriteTimeData = ((point, data) => {
  const time = point.getTime();

  if (!time) {
    return undefined;
  }

  const valueOfTime = time.valueOf();
  const nearest = data.sort((a, b) => {
    return Math.abs(valueOfTime - a.time) - Math.abs(valueOfTime - b.time);
  })[0];

  if (time.diff(luxon.DateTime.fromMillis(nearest.time), ['milliseconds']).as('seconds') > 15) {
    return undefined;
  }

  return nearest.value;
});

module.exports = rewriteTimeData;
